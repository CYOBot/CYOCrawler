(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{189:function(e,t,s){Promise.resolve().then(s.bind(s,1024)),Promise.resolve().then(s.bind(s,1600)),Promise.resolve().then(s.bind(s,6945)),Promise.resolve().then(s.bind(s,6016)),Promise.resolve().then(s.bind(s,754)),Promise.resolve().then(s.bind(s,5548)),Promise.resolve().then(s.bind(s,8386)),Promise.resolve().then(s.t.bind(s,4986,23))},754:function(e,t,s){"use strict";s.r(t),s.d(t,{Nav:function(){return w}});var n=s(9219),r=s(7659),a=s.n(r);let o=()=>(0,n.jsx)(a(),{alt:"logo",src:"./_next/logo.png",width:240,height:48}),i=e=>{let{height:t,width:s,className:r}=e;return(0,n.jsx)(a(),{alt:"wifi",src:"./_next/icons/wifi.png",className:r,height:t,width:s})};var c=s(1962);let l=e=>{let{children:t,className:s}=e;return(0,n.jsx)("h3",{className:(0,c.cn)("scroll-m-20 text-2xl font-semibold tracking-tight",s),children:t})};var d=s(7501),u=s(2145);let f=()=>{let{status:e}=(0,d.c)();return"connected"===e?(0,n.jsx)("span",{className:"text-positive",children:"Connected"}):"disconnected"===e?(0,n.jsx)("span",{className:"text-destructive",children:"Disconnected"}):null},h=()=>{let{setOpen:e}=(0,u.K)();return(0,n.jsx)("button",{onClick:()=>e(!0),children:(0,n.jsxs)(l,{className:"text-primary-foreground flex justify-start items-center",children:[(0,n.jsx)(i,{className:"mr-2 p-0.5",height:32,width:32}),(0,n.jsx)(f,{})]})})};var p=s(77),v=s(2564);let g=e=>{let{numDots:t,delayMs:s}=e,[r,a]=(0,v.useState)(1);return(0,v.useEffect)(()=>{let e=setInterval(()=>a(e=>e%t+1),s);return()=>{clearInterval(e)}},[s,t]),(0,n.jsx)("div",{className:"flex -space-x-4 items-end -ml-2",children:Array.from(Array(r)).map((e,t)=>(0,n.jsx)(p.Z,{className:"w-6 h-6 -mb-1"},t))})};var m=s(1392);let b=e=>{let{height:t,width:s,className:r}=e;return(0,n.jsx)(a(),{alt:"robot",src:"./_next/icons/robot.png",className:r,height:t,width:s})},x=()=>{let{status:e}=(0,m.x)();return"loading"===e?(0,n.jsxs)("span",{className:"text-muted relative pr-6",children:["Loading",(0,n.jsx)("span",{className:"absolute bottom-0",children:(0,n.jsx)(g,{numDots:3,delayMs:1e3})})]}):"connected"===e?(0,n.jsx)("span",{className:"text-positive",children:"Connected"}):"disconnected"===e?(0,n.jsx)("span",{className:"text-destructive",children:"Disconnected"}):null},y=()=>(0,n.jsxs)(l,{className:"text-primary-foreground flex justify-start items-center",children:[(0,n.jsx)(b,{className:"mr-2 p-0.5",height:32,width:32}),(0,n.jsx)(x,{})]});var C=s(4096);let w=()=>{let{setOpen:e}=(0,u.K)(),{refetchStatus:t}=(0,d.c)(),{client:s,refetchStatus:r}=(0,m.x)(),a=(0,v.useCallback)(()=>{s.softReset()},[s]);return(0,n.jsx)("nav",{className:"w-full fixed h-20 bg-primary px-8",children:(0,n.jsxs)("div",{className:"h-full flex items-center justify-between",children:[(0,n.jsx)(o,{}),(0,n.jsxs)("div",{className:"h-full flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"h-full flex flex-row items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-44 h-full flex items-center",children:(0,n.jsx)(h,{})}),(0,n.jsx)(C.z,{variant:"secondary",onClick:()=>e(!0),children:"Connect"}),(0,n.jsx)(C.z,{variant:"secondary",onClick:t,children:"Refresh"})]}),(0,n.jsxs)("div",{className:"h-full flex flex-row items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-44 h-full flex items-center",children:(0,n.jsx)(y,{})}),(0,n.jsx)(C.z,{variant:"secondary",onClick:r,children:"Refresh"}),(0,n.jsx)(C.z,{variant:"secondary",onClick:a,children:"Reset"})]})]})]})})}},1024:function(e,t,s){"use strict";s.r(t),s.d(t,{CodeProvider:function(){return o}});var n=s(9219),r=s(6833),a=s(2564);let o=e=>{let{children:t}=e,[s,o]=(0,a.useState)("");return(0,n.jsx)(r.q.Provider,{value:{code:s,setCode:o},children:t})}},5548:function(e,t,s){"use strict";s.r(t),s.d(t,{OnboardingOpenStatusProvider:function(){return o}});var n=s(9219),r=s(5767),a=s(2564);let o=e=>{let{children:t}=e,[s,o]=(0,a.useState)(!1);return(0,n.jsx)(r.D.Provider,{value:{open:s,setOpen:o},children:t})}},1600:function(e,t,s){"use strict";s.r(t),s.d(t,{PythonWebREPLClientProvider:function(){return c}});var n=s(9219),r=s(1679),a=s(810),o=s(5817),i=s(2072);let c=e=>{let{children:t}=e,{config:s}=(0,o.Z)();return(0,n.jsx)(r.p.Provider,{value:new i.v({endpoint:(s||a.u).pythonWebREPL.endpoint,password:(s||a.u).pythonWebREPL.password}),children:t})}},6945:function(e,t,s){"use strict";s.r(t),s.d(t,{PythonWebREPLClientResponseProvider:function(){return o}});var n=s(9219),r=s(1991),a=s(2564);let o=e=>{let{children:t}=e,[s,o]=(0,a.useState)([]);return(0,n.jsx)(r.L.Provider,{value:{clientResponses:s,setClientResponses:o},children:t})}},8386:function(e,t,s){"use strict";s.r(t),s.d(t,{QueryClientProvider:function(){return o}});var n=s(9219),r=s(3328);let a=new r.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0}}}),o=e=>{let{children:t}=e;return(0,n.jsx)(r.QueryClientProvider,{client:a,children:t})}},4096:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var n=s(9219),r=s(1011),a=s(5762),o=s(2564),i=s(1962);let c=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",muted:"bg-muted text-muted-foreground hover:bg-muted/90",positive:"bg-positive text-positive-foreground hover:bg-positive/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:l=!1,...d}=e,u=l?r.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(c({variant:a,size:o,className:s})),ref:t,...d})});l.displayName="Button"},6016:function(e,t,s){"use strict";s.r(t),s.d(t,{Toaster:function(){return b}});var n=s(9219),r=s(4071),a=s(5762),o=s(4134),i=s(2564),c=s(1962);let l=r.zt,d=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.l_,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a})});d.displayName=r.l_.displayName;let u=(0,a.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=i.forwardRef((e,t)=>{let{className:s,variant:a,...o}=e;return(0,n.jsx)(r.fC,{ref:t,className:(0,c.cn)(u({variant:a}),s),...o})});f.displayName=r.fC.displayName;let h=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.aU,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a})});h.displayName=r.aU.displayName;let p=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.x8,{ref:t,className:(0,c.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})});p.displayName=r.x8.displayName;let v=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.Dx,{ref:t,className:(0,c.cn)("text-sm font-semibold",s),...a})});v.displayName=r.Dx.displayName;let g=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.dk,{ref:t,className:(0,c.cn)("text-sm opacity-90",s),...a})});g.displayName=r.dk.displayName;var m=s(5814);function b(){let{toasts:e}=(0,m.pm)();return(0,n.jsxs)(l,{children:[e.map(function(e){let{id:t,title:s,description:r,action:a,...o}=e;return(0,n.jsxs)(f,{...o,children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[s&&(0,n.jsx)(v,{children:s}),r&&(0,n.jsx)(g,{children:r})]}),a,(0,n.jsx)(p,{})]},t)}),(0,n.jsx)(d,{})]})}},6833:function(e,t,s){"use strict";s.d(t,{q:function(){return a}});var n=s(3916),r=s(2564);let a=(0,r.createContext)({code:"",setCode:n.Z})},5767:function(e,t,s){"use strict";s.d(t,{D:function(){return a}});var n=s(3916),r=s(2564);let a=(0,r.createContext)({open:!1,setOpen:n.Z})},1679:function(e,t,s){"use strict";s.d(t,{p:function(){return o}});var n=s(810),r=s(2072),a=s(2564);let o=(0,a.createContext)(new r.v({endpoint:n.u.pythonWebREPL.endpoint,password:n.u.pythonWebREPL.password}))},1991:function(e,t,s){"use strict";s.d(t,{L:function(){return a}});var n=s(3916),r=s(2564);let a=(0,r.createContext)({clientResponses:[],setClientResponses:n.Z})},810:function(e,t,s){"use strict";s.d(t,{u:function(){return n}});let n={pythonWebREPL:{endpoint:"ws://192.168.4.1:8266",password:"cyobot"},codeEditor:{loading:{progressIntervalMs:1e3,progressIncrementValue:10,messageIntervalMs:3e3,messages:["Hang on tight...","Almost there...","Patience is a virtue of all programmers","Sometimes taking a walk is the best debug strategy","Don't forget to drink water, programmers are human too","Have you touched grass today?"],onFinishLoadingMessage:"We're ready, have fun!",onFinishLoadingDelayMs:1e3}},onboarding:{hasProvidedWifiCredentials:!0,hasProvidedCodeEditorPreference:!1,openPortalInstructionCards:[{header:"1. Connect your laptop to wifi",content:"Use your navigation bar to connect your laptop to the same wifi network that CYOCrawler connected to previously."},{header:"2. Type CYOCrawler’s IP into a new browser",content:"Your Crawler will show a unique IP on its LED screen (e.g, 192.168.100.200). Type the IP shown into a new tab on your browser."},{header:"3. Finish!",content:"Now, your Crawler’s IP address has become your personal portal address. Next time, just type in this IP into your browser to connect to the portal while going online."}]},queryIndices:{useConfig:"useConfig",useNetworks:"useNetworks",useCyobrainInternetConnectionStatus:"useCyobrainInternetConnectionStatus"}}},5817:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(810),r=s(678);let a=r.z.object({pythonWebREPL:r.z.object({endpoint:r.z.string(),password:r.z.string()}),codeEditor:r.z.object({loading:r.z.object({progressIntervalMs:r.z.number(),progressIncrementValue:r.z.number(),messageIntervalMs:r.z.number(),messages:r.z.array(r.z.string()),onFinishLoadingMessage:r.z.string(),onFinishLoadingDelayMs:r.z.number()})}),onboarding:r.z.object({hasProvidedWifiCredentials:r.z.boolean(),hasProvidedCodeEditorPreference:r.z.boolean(),openPortalInstructionCards:r.z.array(r.z.object({header:r.z.string(),content:r.z.string()}))}),queryIndices:r.z.object({useConfig:r.z.string(),useNetworks:r.z.string(),useCyobrainInternetConnectionStatus:r.z.string()})}).default(n.u),o=(e,t)=>{if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(let r of s)if(!n.includes(r)||!o(e[r],t[r]))return!1;return!0};var i=s(2564),c=s(3328);let l=()=>{let[e,t]=(0,i.useState)(n.u),{data:s,refetch:r}=(0,c.useQuery)(e.queryIndices.useConfig,async()=>{let e=await fetch("/api/config");return e.ok?a.parse(await e.json()):(console.error("Error fetching config, fallback to default config"),a.parse(void 0))});return(0,i.useEffect)(()=>{s&&!o(e,s)&&t(s)},[s,e]),{config:e,setConfig:t,refetchConfig:async()=>{await r()}}}},7501:function(e,t,s){"use strict";s.d(t,{c:function(){return o}});var n=s(5817),r=s(3328),a=s(678);let o=()=>{var e;let{config:t}=(0,n.Z)(),{data:s,refetch:o}=(0,r.useQuery)(t.queryIndices.useCyobrainInternetConnectionStatus,async()=>{try{let e=await fetch("/api/internet");return a.z.object({status:a.z.literal("connected").or(a.z.literal("disconnected"))}).parse(await e.json())}catch(e){return console.error(e),{status:"disconnected"}}});return{status:null!==(e=null==s?void 0:s.status)&&void 0!==e?e:"disconnected",refetchStatus:async()=>{await o()}}}},2145:function(e,t,s){"use strict";s.d(t,{K:function(){return a}});var n=s(5767),r=s(2564);let a=()=>{let{open:e,setOpen:t}=(0,r.useContext)(n.D);return{open:e,setOpen:t}}},1392:function(e,t,s){"use strict";s.d(t,{x:function(){return a}});var n=s(1679),r=s(2564);let a=()=>{let e=(0,r.useContext)(n.p),[t,s]=(0,r.useState)(e.status),[a,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e.addOnAfterStatusChangedCallback("setStatusCallback",(e,t)=>s(t))},[e]),(0,r.useEffect)(()=>(a&&e.connect(),()=>{e.close()}),[a]);let i=(0,r.useCallback)(()=>{e.close(),setTimeout(()=>o(e=>!e),500),setTimeout(()=>o(e=>!e),1e3)},[e]);return{client:e,status:t,refetchStatus:i}}},5814:function(e,t,s){"use strict";s.d(t,{pm:function(){return f}});var n=s(2564);let r=0,a=new Map,o=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=i(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=n.useState(l);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},2072:function(e,t,s){"use strict";s.d(t,{v:function(){return a}});let n=e=>(" "+e).slice(1);var r=s(7883);class a{connect(){var e;"connected"===this.status&&(null===(e=this.socket)||void 0===e||e.close()),this.setStatus("loading"),setTimeout(()=>{"loading"===this.status&&this.setStatus("disconnected")},3e3),this.socket=new r.w3cwebsocket(this.endpoint),this.socket.onopen=()=>{var e;null===(e=this.socket)||void 0===e||e.send("".concat(this.password,"\n"))},this.socket.onmessage=async e=>{if("connected"!==this.status)"\r\nWebREPL connected\r\n>>> "===e.data?this.setStatus("connected"):this.setStatus("disconnected");else if("connected"===this.status)for(let t=0;t<this.onMessageReceiveCallbacks.length;t++)await this.onMessageReceiveCallbacks[t](e.data.toString())},this.socket.onerror=e=>{console.error(e)}}close(){var e;null===(e=this.socket)||void 0===e||e.close(),this.setStatus("disconnected")}async send(e){let t=async()=>{let t=n(e);if(this.socket){for(this.socket.send('\x01_g=globals().copy();_g.pop("_g", None);'),this.socket.send('exec("""');""!==t;)this.socket.send(t.substring(0,20)),t=t.substring(20),await new Promise(e=>setTimeout(e,50));this.socket.send('\n""", _g)\x04')}};for(let t=0;t<this.onBeforeSendCallbacks.length;t++)await this.onBeforeSendCallbacks[t](e);await t();for(let t=0;t<this.onAfterSentCallbacks.length;t++)await this.onAfterSentCallbacks[t](e)}async interrupt(){var e;null===(e=this.socket)||void 0===e||e.send("\x02\x03")}async softReset(){var e;null===(e=this.socket)||void 0===e||e.send("\x02\x04")}async setStatus(e){let t=this.status;Object.defineProperty(this,"status",{writable:!1,configurable:!0,value:e});for(let s=0;s<this.onAfterStatusChangedCallbacks.length;s++)await this.onAfterStatusChangedCallbacks[s](t,e)}addOnMessageReceiveCallback(e,t){this.onMessageReceiveCallbackIds.has(e)||(this.onMessageReceiveCallbacks.push(t),this.onMessageReceiveCallbackIds.add(e))}addOnAfterStatusChangedCallback(e,t){this.onAfterStatusChangedCallbackIds.has(e)||(this.onAfterStatusChangedCallbacks.push(t),this.onAfterStatusChangedCallbackIds.add(e))}addOnBeforeSendCallbacks(e,t){this.onBeforeSendCallbackIds.has(e)||(this.onBeforeSendCallbacks.push(t),this.onBeforeSendCallbackIds.add(e))}addOnAfterSentCallbacks(e,t){this.onAfterSentCallbackIds.has(e)||(this.onAfterSentCallbacks.push(t),this.onAfterSentCallbackIds.add(e))}constructor({endpoint:e,password:t}){this.onMessageReceiveCallbacks=[],this.onMessageReceiveCallbackIds=new Set,this.onAfterStatusChangedCallbacks=[],this.onAfterStatusChangedCallbackIds=new Set,this.onBeforeSendCallbacks=[],this.onBeforeSendCallbackIds=new Set,this.onAfterSentCallbacks=[],this.onAfterSentCallbackIds=new Set,this.endpoint=e,this.password=t,this.status="disconnected"}}},1962:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var n=s(4686),r=s(7226);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m)((0,n.W)(t))}},3916:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s]}},4986:function(){}},function(e){e.O(0,[842,313,253,151,744],function(){return e(e.s=189)}),_N_E=e.O()}]);