(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5505:function(e,t,s){Promise.resolve().then(s.bind(s,9012)),Promise.resolve().then(s.bind(s,1024)),Promise.resolve().then(s.bind(s,1600)),Promise.resolve().then(s.bind(s,6945)),Promise.resolve().then(s.t.bind(s,4986,23))},9012:function(e,t,s){"use strict";s.r(t),s.d(t,{Nav:function(){return j}});var n=s(9219),a=s(7659),r=s.n(a);let i=()=>(0,n.jsx)(r(),{alt:"logo",src:"./_next/logo.png",width:240,height:48});var o=s(77),c=s(2564);let l=e=>{let{numDots:t,delayMs:s}=e,[a,r]=(0,c.useState)(1);return(0,c.useEffect)(()=>{let e=setInterval(()=>r(e=>e%t+1),s);return()=>{clearInterval(e)}},[s,t]),(0,n.jsx)("div",{className:"flex -space-x-4 items-end -ml-2",children:Array.from(Array(a)).map((e,t)=>(0,n.jsx)(o.Z,{className:"w-6 h-6 -mb-1"},t))})};var d=s(4686),u=s(7226);function h(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,u.m)((0,d.W)(t))}let f=e=>{let{children:t,className:s}=e;return(0,n.jsx)("h3",{className:h("scroll-m-20 text-2xl font-semibold tracking-tight",s),children:t})};var v=s(1392);let b=()=>{let e=(0,v.x)();return"loading"===e.status?(0,n.jsxs)("span",{className:"text-muted-foreground relative pr-6",children:["Loading",(0,n.jsx)("span",{className:"absolute bottom-0",children:(0,n.jsx)(l,{numDots:3,delayMs:1e3})})]}):"connected"===e.status?(0,n.jsx)("span",{className:"text-positive",children:"Connected"}):"disconnected"===e.status?(0,n.jsx)("span",{className:"text-destructive",children:"Disconnected"}):null},g=()=>(0,n.jsxs)(f,{className:"text-primary-foreground flex justify-start",children:[(0,n.jsx)("span",{className:"pr-2",children:"Status: "}),(0,n.jsx)(b,{})]});var x=s(6758),p=s(5762);let C=(0,p.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",positive:"bg-positive text-positive-foreground hover:bg-positive/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),k=c.forwardRef((e,t)=>{let{className:s,variant:a,size:r,asChild:i=!1,...o}=e,c=i?x.g7:"button";return(0,n.jsx)(c,{className:h(C({variant:a,size:r,className:s})),ref:t,...o})});k.displayName="Button";var m=s(1382),S=s(1927),y=s(5859),w=s(4061);let j=()=>{let{code:e}=(0,m.h)(),{client:t}=(0,v.x)(),{setClientResponses:s}=(0,S.v)();return(0,n.jsx)("nav",{className:"w-full fixed h-20 bg-primary px-8",children:(0,n.jsxs)("div",{className:"h-full flex items-center justify-between",children:[(0,n.jsx)(i,{}),(0,n.jsxs)("div",{className:"h-full flex items-center space-x-4",children:[(0,n.jsx)(g,{}),"connected"!==t.status?(0,n.jsxs)(k,{variant:"secondary",className:"text-lg",onClick:()=>t.connect(),children:[(0,n.jsx)(y.Z,{className:"w-[18px] h-[18px] mr-1.5"}),"Refresh"]}):(0,n.jsxs)(k,{variant:"positive",className:"text-lg",onClick:async()=>{s([]),await t.send(e)},children:[(0,n.jsx)(w.Z,{className:"w-[18px] h-[18px] mr-1.5"}),"Run"]})]})]})})}},1024:function(e,t,s){"use strict";s.r(t),s.d(t,{CodeProvider:function(){return i}});var n=s(9219),a=s(6833),r=s(2564);let i=e=>{let{children:t}=e,[s,i]=(0,r.useState)("");return(0,n.jsx)(a.q.Provider,{value:{code:s,setCode:i},children:t})}},1600:function(e,t,s){"use strict";s.r(t),s.d(t,{PythonWebREPLClientProvider:function(){return o}});var n=s(9219),a=s(9723),r=s(1679),i=s(2072);let o=e=>{let{children:t}=e;return(0,n.jsx)(r.p.Provider,{value:new i.v({endpoint:a.D.pythonWebREPL.endpoint}),children:t})}},6945:function(e,t,s){"use strict";s.r(t),s.d(t,{PythonWebREPLClientResponseProvider:function(){return i}});var n=s(9219),a=s(1991),r=s(2564);let i=e=>{let{children:t}=e,[s,i]=(0,r.useState)([]);return(0,n.jsx)(a.L.Provider,{value:{clientResponses:s,setClientResponses:i},children:t})}},9723:function(e,t,s){"use strict";s.d(t,{D:function(){return n}});let n={pythonWebREPL:{endpoint:"ws://192.168.4.1:8266",password:"cyobot"}}},6833:function(e,t,s){"use strict";s.d(t,{q:function(){return r}});var n=s(3916),a=s(2564);let r=(0,a.createContext)({code:"",setCode:n.Z})},1679:function(e,t,s){"use strict";s.d(t,{p:function(){return i}});var n=s(9723),a=s(2072),r=s(2564);let i=(0,r.createContext)(new a.v({endpoint:n.D.pythonWebREPL.endpoint}))},1991:function(e,t,s){"use strict";s.d(t,{L:function(){return r}});var n=s(3916),a=s(2564);let r=(0,a.createContext)({clientResponses:[],setClientResponses:n.Z})},1382:function(e,t,s){"use strict";s.d(t,{h:function(){return r}});var n=s(6833),a=s(2564);let r=()=>{let{code:e,setCode:t}=(0,a.useContext)(n.q);return{code:e,setCode:t}}},1927:function(e,t,s){"use strict";s.d(t,{v:function(){return r}});var n=s(1991),a=s(2564);let r=()=>{let{clientResponses:e,setClientResponses:t}=(0,a.useContext)(n.L);return{clientResponses:e,setClientResponses:t}}},1392:function(e,t,s){"use strict";s.d(t,{x:function(){return r}});var n=s(1679),a=s(2564);let r=()=>{let e=(0,a.useContext)(n.p),[t,s]=(0,a.useState)(e.status);return(0,a.useEffect)(()=>{e.addOnAfterStatusChangedCallback("setStatusCallback",(e,t)=>s(t))},[e]),{client:e,status:t}}},2072:function(e,t,s){"use strict";s.d(t,{v:function(){return i}});var n=s(9723);let a=e=>(" "+e).slice(1);var r=s(7883);class i{connect(){var e;"connected"===this.status&&(null===(e=this.socket)||void 0===e||e.close()),this.setStatus("loading"),setTimeout(()=>{"loading"===this.status&&this.setStatus("disconnected")},3e3),this.socket=new r.w3cwebsocket(n.D.pythonWebREPL.endpoint),this.socket.onopen=()=>{var e;null===(e=this.socket)||void 0===e||e.send("".concat(n.D.pythonWebREPL.password,"\n"))},this.socket.onmessage=async e=>{if("connected"!==this.status)"\r\nWebREPL connected\r\n>>> "===e.data?this.setStatus("connected"):this.setStatus("disconnected");else if("connected"===this.status)for(let t=0;t<this.onMessageReceiveCallbacks.length;t++)await this.onMessageReceiveCallbacks[t](e.data.toString())},this.socket.onerror=e=>{console.error(e)}}async send(e){let t=async()=>{let t=a(e);if(this.socket){for(this.socket.send('\x01_g=globals().copy();_g.pop("_g", None);'),this.socket.send('exec("""');""!==t;)this.socket.send(t.substring(0,20)),t=t.substring(20),await new Promise(e=>setTimeout(e,50));this.socket.send('\n""", _g)\x04')}};for(let t=0;t<this.onBeforeSendCallbacks.length;t++)await this.onBeforeSendCallbacks[t](e);await t();for(let t=0;t<this.onAfterSentCallbacks.length;t++)await this.onAfterSentCallbacks[t](e)}async setStatus(e){let t=this.status;Object.defineProperty(this,"status",{writable:!1,configurable:!0,value:e});for(let s=0;s<this.onAfterStatusChangedCallbacks.length;s++)await this.onAfterStatusChangedCallbacks[s](t,e)}addOnMessageReceiveCallback(e,t){this.onMessageReceiveCallbackIds.has(e)||(this.onMessageReceiveCallbacks.push(t),this.onMessageReceiveCallbackIds.add(e))}addOnAfterStatusChangedCallback(e,t){this.onAfterStatusChangedCallbackIds.has(e)||(this.onAfterStatusChangedCallbacks.push(t),this.onAfterStatusChangedCallbackIds.add(e))}addOnBeforeSendCallbacks(e,t){this.onBeforeSendCallbackIds.has(e)||(this.onBeforeSendCallbacks.push(t),this.onBeforeSendCallbackIds.add(e))}addOnAfterSentCallbacks(e,t){this.onAfterSentCallbackIds.has(e)||(this.onAfterSentCallbacks.push(t),this.onAfterSentCallbackIds.add(e))}constructor({endpoint:e}){this.onMessageReceiveCallbacks=[],this.onMessageReceiveCallbackIds=new Set,this.onAfterStatusChangedCallbacks=[],this.onAfterStatusChangedCallbackIds=new Set,this.onBeforeSendCallbacks=[],this.onBeforeSendCallbackIds=new Set,this.onAfterSentCallbacks=[],this.onAfterSentCallbackIds=new Set,this.endpoint=e,this.status="disconnected"}}},3916:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s]}},4986:function(){}},function(e){e.O(0,[306,253,151,744],function(){return e(e.s=5505)}),_N_E=e.O()}]);