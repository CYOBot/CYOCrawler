"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{5875:function(e,l,s){s.r(l),s.d(l,{CodeEditor:function(){return v}});var t=s(9219),a=s(4096),i=s(6523),r=s(1382),n=s(2564);let c=e=>{let[l,s]=(0,n.useState)(""),[t,a]=(0,n.useState)("");return(0,n.useEffect)(()=>{let l=e.findIndex(e=>"OK"===e);if(-1===l){s(""),a("");return}let t=e.findIndex(e=>"\x04"===e);if(-1===t){s(e.slice(l+1).join("").trim());return}let i=e.findLastIndex(e=>"\x04"===e);if(t===i-1)s(e.slice(l+1,t).join("").trim());else{if(-1===i)throw"lastEndOfTransmissionIndex should not be -1 if an error occur in user code";a(e.slice(t+1,i).join("").trim())}},[e]),{consoleOutput:l,setConsoleOutput:s,consoleErrorOutput:t,setConsoleErrorOutput:a}};var o=s(1392),d=s(1927),x=s(6078),u=s(3380),f=s(4898),h=s(8004),m=s(7523);let v=()=>{let{code:e,setCode:l}=(0,r.h)();(0,n.useEffect)(()=>{""===e&&l('print("hello world")')},[]);let{client:s}=(0,o.x)(),{clientResponses:v,setClientResponses:j}=(0,d.v)(),[p,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s.addOnMessageReceiveCallback("onMessageReceive",e=>{j(l=>[...l,e])})},[s,j]);let{consoleOutput:N,consoleErrorOutput:b}=c(v),k=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=k.current)||void 0===e||e.scrollIntoView()},[N,b]);let C=(0,n.useCallback)(()=>{s.send(e),j([])},[s,e,j]),E=(0,n.useCallback)(()=>{s.interrupt()},[s]);return(0,t.jsxs)("div",{className:"px-6 py-4 w-full h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex-1 relative flex flex-col",children:[(0,t.jsx)(i.k,{children:"Code Editor"}),(0,t.jsx)("div",{className:"absolute top-12 w-full h-[calc(100%-40px-40px-8px-12px)] bg-muted",children:(0,t.jsx)(u.ZP,{className:"h-full text-lg overflow-y-auto",value:e,onChange:l,extensions:[(0,x.Vs)()]})}),(0,t.jsx)("div",{className:"absolute bottom-0 w-full flex justify-end",children:(0,t.jsxs)(a.z,{variant:"muted",onClick:()=>l(""),children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-1.5"}),"Clear"]})})]}),(0,t.jsxs)("div",{className:"flex-1 relative flex flex-col",children:[(0,t.jsx)(i.k,{children:"Console"}),(0,t.jsxs)("div",{className:"absolute top-12 w-full h-[calc(100%-40px-48px-8px)] bg-muted px-4 py-2 whitespace-pre-line font-mono rounded-lg overflow-y-auto",children:[(0,t.jsx)("div",{className:"text-primary",children:N}),(0,t.jsx)("div",{className:"text-destructive",children:b}),(0,t.jsx)("div",{ref:k})]}),(0,t.jsxs)("div",{className:"absolute bottom-0 w-full flex flex-row justify-end space-x-4",children:[(0,t.jsxs)(a.z,{variant:"destructive",className:"text-background",onClick:E,children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-1.5"}),"Break"]}),(0,t.jsxs)(a.z,{variant:"positive",className:"text-primary",onClick:C,children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-1.5"}),"Run"]})]})]})]})}}}]);